# Проект CV-010 Детекция лиц

## Описание

Реализация детектора лиц с использованием предобученных каскадов Хаара в OpenCV. Проект предоставляет как консольное, так и веб-приложение для распознавания лиц на изображениях.

## Особенности

- Загрузка изображений для распознавания лиц
- Отображение количества обнаруженных лиц
- Выделение лиц прямоугольными рамками
- Сохранение результатов в папку static
- Веб-интерфейс с использованием Flask
- Общее ядро детекции лиц для устранения дублирования кода
- Гибкая конфигурация параметров детекции

## Требования

- Python 3.10+
- Библиотеки: OpenCV, NumPy, Flask

## Установка

1. Клонируйте репозиторий:
```bash
git clone https://github.com/KSP-Hub/My-CV-Engineering-Projects.git
cd My-CV-Engineering-Projects/CV-010_face_detection
```

2. Создайте и активируйте виртуальное окружение:
```bash
python -m venv venv
venv\Scripts\activate
```

3. Установите зависимости:
```bash
pip install -r requirements.txt
```

## Использование

### Консольное приложение

1. Поместите изображение для анализа в корневую директорию и назовите его `input.jpg`
2. Запустите скрипт:
```bash
python src/face_detection.py
```

### Веб-приложение

1. Запустите сервер:
```bash
python src/CV-010-app.py
```
2. Откройте в браузере: http://localhost:5000
3. Загрузите изображение для анализа

## Документация

Полная документация проекта доступна в папке `docs/`:

- [Getting Started](docs/getting_started.md) - инструкция по началу работы
- [API Reference](docs/api_reference.md) - документация по API
- [Troubleshooting](docs/troubleshooting.md) - руководство по устранению неполадок
- [Contributing](docs/contributing.md) - инструкции для разработчиков

## Структура проекта

```
CV-010_face_detection/
├── configs/                        # Конфигурационные файлы
│   └── haarcascade_frontalface_default.xml
├── docs/                           # Документация
│   ├── getting_started/                # Инструкция по началу работы
│   ├── api_reference/                  # Документация по API
│   ├── troubleshooting/                # Руководство по устранению неполадок
│   └── contributing                    # Инструкции для разработчиков
├── src/                            # Исходный код
│   ├── face_detection.py           # Консольное приложение
│   ├── CV-010-app.py               # Веб-приложение
│   ├── face_detection_core.py      # Ядро детекции лиц
│   └── __init__.py
├── static/                         # Результаты обработки
├── templates/                      # HTML шаблоны
├── tests/                          # Тесты
├── assets/                         # Ассеты
├── scripts/                        # Скрипты автоматизации
├── pyproject.toml       # Файл используется для управления зависимостями, настройки инструментов и описания пакета
├── CV-010-app.spec      # Файл используется PyInstaller для создания исполняемого файла
├── face_detection.log   # Основной лог-файл. Настроен в face_detection.py ч/зlogging.FileHandler("../face_detection.log", encoding="utf-8")
├── face_detection_notebook.ipynb   # Jupyter notebook с аналитикой и демонстрацией работы алгоритма
├── requirements.txt                # Зависимости
├── CHANGELOG.md                    # История изменений
├── LICENSE                         # Лицензия
└── README.md                       # Основная документация
```

## Настройка параметров

Параметры детекции можно настроить в `src/face_detection_core.py` в классе `FaceDetectionConfig`:

```python
class FaceDetectionConfig:
    def __init__(self):
        self.scale_factor = 1.1      # Меньше = точнее, но медленнее
        self.min_neighbors = 5       # Больше = меньше ложных срабатываний
        self.min_size = (30, 30)     # Минимальный размер лица
        self.max_image_width = 800   # Максимальная ширина для веб-интерфейса
```

## Тестирование

Запустите тесты для проверки функциональности:
```bash
pytest tests/
```

## Версионирование

Проект следует принципам семантического версионирования (MAJOR.MINOR.PATCH). История изменений доступна в [CHANGELOG.md](CHANGELOG.md).

## Лицензия

MIT License